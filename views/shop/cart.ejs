<%- include("../includes/head.ejs") %>
  <link rel="stylesheet" href="/css/cart.css">

<%- include("../includes/start.ejs") %>

    <%- include("../includes/header.ejs") %>

    <main class="cartBox">
      <h1 class="cartTitle">Cart</h1>
      <% if (products.length > 0) { %>
      <div class="cartItemsBox">
        <% products.forEach(prod => { %>
          <div class="cartItem">
            <div class="cartImageBox">
              <img class="cartImage" src="<%= prod.productId.imageUrl %>" alt="<%= prod.productId.name %>" >
            </div>
            <p class="cartItemName"><%= prod.productId.name %></p>
            <p class="cartItemPrice">$ <%= prod.productId.price %></p>
            <div class="cartSubBox">
              <p class="cartItemPrice">Qty: <%= prod.quantity %></p>
              <form action="/cart-delete-item" method="post">
                <div class="confirmBtnBox">
                  <input type="hidden" value="<%= prod.productId._id %>" name="productId" >
                  <button class="confirmBtn" type="submit">Delete</button>
                </div>
              </form>
            </div>
          </div>
        <% }) %>
        <div>
          <form method="post" action="/create-order">
            <div class="confirmBtnBox">
              <button class="confirmBtn" type="submit">Order!</button>
            </div>
          </form>
        </div>
      </div>
      <% } else { %>
        <p class="emptyText">Cart empty</p>
      <% } %>    
    </main>

<%- include("../includes/end.ejs") %>